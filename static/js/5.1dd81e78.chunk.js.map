{"version":3,"sources":["components/SearchBar/SearchBar.js","pages/MoviesPage/MoviesPage.js","hooks/useToggle.js","Services/api.js","components/MoviesList/MoviesList.js","components/MoviesList/MoviesList.module.css","components/Button/Button.js","components/Button/Button.module.css","components/SearchBar/SearchBar.module.css"],"names":["SearchBar","getQuery","useState","query","setQuery","className","s","SearchForm","onSubmit","e","preventDefault","type","button","buttonLabel","input","name","value","onChange","target","autoComplete","autoFocus","placeholder","MoviesPage","useRouteMatch","history","useHistory","location","useLocation","movies","setMovies","page","setPage","initValue","state","setState","prev","useToggle","isLoading","setIsLoading","error","setError","useEffect","api","fetchMovies","then","data","results","catch","err","console","log","Button","text","onClick","push","from","Loader","MoviesList","API_KEY","axios","defaults","baseURL","fetchObject","a","url","param","get","result","message","fetchReviews","movieId","fetchTrends","fetchMovieById","fetchCast","list","map","movie","item","to","id","src","backdrop_path","alt","title","img","module","exports"],"mappings":"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","file":"static/js/5.1dd81e78.chunk.js","sourcesContent":["import s from \"./SearchBar.module.css\";\nimport { useState } from \"react\";\n\nexport function SearchBar({ getQuery }) {\n  const [query, setQuery] = useState(\"\");\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    switch (name) {\n      case \"query\":\n        setQuery(value);\n        break;\n      default:\n    }\n  };\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    getQuery({ query });\n    setQuery(\"\");\n  };\n\n  return (\n    <header className={s.SearchBar}>\n      <form className={s.SearchForm} onSubmit={handleSubmit}>\n        <button type=\"submit\" className={s.button}>\n          <span className={s.buttonLabel}>Search</span>\n        </button>\n        <input\n          className={s.input}\n          type=\"text\"\n          name=\"query\"\n          value={query}\n          onChange={handleChange}\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Search movie\"\n        />\n      </form>\n    </header>\n  );\n}\n","import { useEffect, useState } from \"react\";\nimport {\n  Link,\n  Route,\n  useRouteMatch,\n  useLocation,\n  useHistory,\n  useParams,\n} from \"react-router-dom\";\n// import PropTypes from \"prop-types\";\nimport { useToggle } from \"../../hooks/useToggle\";\nimport api from \"../../Services/api\";\nimport Button from \"../../components/Button/Button\";\n// import Title from \"../../components/Title/Title\";\nimport LoaderSpinner from \"../../components/Loader/Loader\";\nimport { SearchBar } from \"../../components/SearchBar/SearchBar\";\nimport { MoviesList } from \"../../components/MoviesList/MoviesList\";\n\nconst MoviesPage = () => {\n  const match = useRouteMatch();\n  const history = useHistory();\n  const location = useLocation();\n  const [movies, setMovies] = useState(null);\n  const [query, setQuery] = useState(\"\");\n  const [page, setPage] = useState(1);\n  const [isLoading, setIsLoading] = useToggle(false);\n  const [error, setError] = useState(null);\n  // const [result, setResult] = useState([]);\n\n  useEffect(() => {\n    if (!query) return;\n    setQuery();\n    api\n      .fetchMovies(query, page)\n      .then((data) => setMovies(data.results))\n      .catch((err) => {\n        setError(error);\n        console.log(err);\n      });\n    setPage((prev) => prev + 1);\n  }, [query, page, error, setMovies]);\n  console.log(movies);\n\n  const getQuery = ({ query, page }) => {\n    setQuery(query);\n    setMovies(movies);\n    if (!setQuery(query)) return setIsLoading(!isLoading);\n  };\n\n  const onClickGoBack = () => {\n    history.push(location?.state?.from || \"/\");\n  };\n  // const onClickLoadMore = () => {\n  //   api\n  //     .fetchMovies(query, page)\n  //     .then((result) => {\n  //       setResult((prev) => [...prev, ...result]);\n  //       if (page == 1) {\n  //         scrollToBottom();\n  //       }\n  //     })\n  //     .catch((err) => {\n  //       setError(error);\n  //       console.log(err);\n  //     });\n  // };\n  // const scrollToBottom = () => {\n  //   setTimeout(() => {\n  //     window.scrollTo({\n  //       top: document.documentElement.scrollHeight,\n  //       behavior: \"smooth\",\n  //     });\n  //   });\n  // };\n\n  return (\n    <>\n      <Button text=\"Go back\" onClick={onClickGoBack} />\n      <SearchBar getQuery={getQuery} />\n      {isLoading && <LoaderSpinner />}\n      {movies && <MoviesList movies={movies} />}\n      {/* {result.length >= 20 && (\n        <Button text=\"Load more\" onClick={onClickLoadMore} />\n      )} */}\n    </>\n  );\n};\nexport default MoviesPage;\n","import { useState } from \"react\";\n\nexport const useToggle = (initValue) => {\n  const [state, setState] = useState(initValue);\n  const toggle = () => {\n    setState((prev) => !prev);\n  };\n  // console.log(\"useToggle\", state);\n  return [state, toggle];\n};\n","import axios from \"axios\";\n\nconst BASE_URL = `https://api.themoviedb.org/3/`;\n//  'https://api.themoviedb.org/4'\nconst API_KEY = `299fab6334d3a7c294b935fd0abb8d7b`;\n\naxios.defaults.baseURL = BASE_URL;\n// axios.defaults.headers.common.Authorization = API_KEY;\n\nconst fetchObject = async (url = \"\", param = {}) => {\n  try {\n    const result = await axios.get(url, param);\n    const data = result.data;\n    return data;\n  } catch (err) {\n    return err.message;\n  }\n};\n\n// fetch Trends\nconst fetchTrends = () => {\n  return fetchObject(`trending/movie/day?api_key=${API_KEY}`);\n};\n\n// fetch Movies\nconst fetchMovies = (query, page) => {\n  return fetchObject(\n    `search/movie?api_key=${API_KEY}&query=${query}&page=${page}&language=en-US&include_adult=false`\n  );\n};\n\n// fetch fetchMovieById\nconst fetchMovieById = (movieId) => {\n  return fetchObject(`movie/${movieId}?api_key=${API_KEY}&language=en-US`);\n};\n\n// fetch fetchCast\nconst fetchCast = (movieId) => {\n  return fetchObject(\n    `movie/${movieId}/credits?api_key=${API_KEY}&language=en-US`\n  );\n};\n\n// fetch fetchReviews\nconst fetchReviews = async (movieId) => {\n  return fetchObject(\n    `movie/${movieId}/reviews?api_key=${API_KEY}&language=en-US&page=1`\n  );\n};\n\nexport default {\n  fetchTrends,\n  fetchMovies,\n  fetchMovieById,\n  fetchCast,\n  fetchReviews,\n};\n","import s from \"./MoviesList.module.css\";\nimport PropTypes from \"prop-types\";\nimport { Link } from \"react-router-dom\";\n\nconst IMG_URL = \"https://image.tmdb.org/t/p/w500\";\n\nexport const MoviesList = ({ movies }) => (\n  <ul className={s.list}>\n    {movies.map((movie) => (\n      <li key={movie.id} className={s.item}>\n        <Link className={s.text} to={`/movies/${movie.id}`}>\n          <img\n            src={`${IMG_URL}${movie.backdrop_path}`}\n            alt={movie.title}\n            title={movie.title}\n            className={s.img}\n          />\n          <br />\n          {movie.title}\n        </Link>\n      </li>\n    ))}\n  </ul>\n);\n\nMoviesList.propTypes = {\n  movies: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number,\n      title: PropTypes.string,\n    })\n  ),\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"MoviesList_list__1lRBZ\",\"item\":\"MoviesList_item__1Rt4r\",\"img\":\"MoviesList_img__1l_I7\",\"text\":\"MoviesList_text__1nO02\"};","import s from \"./Button.module.css\";\nimport PropTypes from \"prop-types\";\n\nconst Button = ({ onClick, text }) => {\n  return (\n    <button type=\"button\" className={s.button} onClick={onClick}>\n      {text}\n    </button>\n  );\n};\n\nButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\nexport default Button;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__3QF_k\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SearchBar\":\"SearchBar_SearchBar__2Pbl1\",\"SearchForm\":\"SearchBar_SearchForm__1k1JW\",\"button\":\"SearchBar_button__zjQ9i\",\"buttonLabel\":\"SearchBar_buttonLabel__10U9b\",\"input\":\"SearchBar_input__35An9\"};"],"sourceRoot":""}